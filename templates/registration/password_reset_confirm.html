{% extends "base.html" %}
{% block title %}Nouveau mot de passe{% endblock %}

{% block content %}
  <div class="card">
    {# Cette vue (PasswordResetConfirmView) est atteinte via le lien reçu par email.
       Le contexte fournit "validlink". Si le lien est invalide/expiré, on propose de refaire une demande. #}

    {% if validlink %}
      <h1>Définis un nouveau mot de passe</h1>
      <form method="post">
        {% csrf_token %}
        {# Le formulaire est un SetPasswordForm -> champs: new_password1 / new_password2 #}
        {{ form.as_p }}
        <button type="submit">Enregistrer le nouveau mot de passe</button>
      </form>
    {% else %}
      <h1>Lien invalide ou expiré</h1>
      <p>Ce lien n’est plus valide. Tu peux relancer une demande de réinitialisation.</p>
      <p><a href="{% url 'password_reset' %}">Demander un nouveau lien</a></p>
    {% endif %}
  </div>
{% endblock %}
